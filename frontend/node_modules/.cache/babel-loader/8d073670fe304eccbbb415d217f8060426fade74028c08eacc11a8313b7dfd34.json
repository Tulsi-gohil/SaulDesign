{"ast":null,"code":"var _jsxFileName = \"D:\\\\SaulDesign\\\\frontend\\\\src\\\\otpverify.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction OtpVerify() {\n  _s();\n  var _location$state;\n  const navigate = useNavigate();\n  const location = useLocation();\n  const email = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.email;\n  const [otp, setOtp] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [seconds, setSeconds] = useState(300); // 5 minutes\n  const [loading, setLoading] = useState(false);\n\n  // countdown timer\n  useEffect(() => {\n    if (seconds === 0) return;\n    const timer = setInterval(() => {\n      setSeconds(s => s - 1);\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [seconds]);\n  const handleVerify = async e => {\n    e.preventDefault();\n    try {\n      const res = await axios.post(\"http://localhost:5000/api/auth/verify-otp\", {\n        email,\n        otp\n      });\n      setMessage(res.data.message);\n      setTimeout(() => navigate(\"/login\"), 1500);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setMessage(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Verification failed\");\n    }\n  };\n  const handleResend = async () => {\n    setLoading(true);\n    try {\n      const res = await axios.post(\"http://localhost:5000/api/auth/resend-otp\", {\n        email\n      });\n      setMessage(res.data.message);\n      setSeconds(300); // reset timer\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setMessage(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"Resend failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      style: styles.card,\n      onSubmit: handleVerify,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Verify OTP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: otp,\n        onChange: e => setOtp(e.target.value),\n        maxLength: \"6\",\n        placeholder: \"Enter OTP\",\n        required: true,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: styles.button,\n        children: \"Verify\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Time left: \", Math.floor(seconds / 60), \":\", seconds % 60]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), seconds === 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: handleResend,\n        disabled: loading,\n        style: styles.resend,\n        children: \"Resend OTP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(OtpVerify, \"ShPHmu0r3FC+gNPRI8GySp927Lk=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = OtpVerify;\nconst styles = {\n  container: {\n    height: \"100vh\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    background: \"#f4f6f8\"\n  },\n  card: {\n    background: \"#fff\",\n    padding: \"30px\",\n    width: \"350px\",\n    textAlign: \"center\",\n    borderRadius: \"8px\"\n  },\n  input: {\n    width: \"100%\",\n    padding: \"10px\",\n    margin: \"15px 0\"\n  },\n  button: {\n    width: \"100%\",\n    padding: \"10px\",\n    background: \"#007bff\",\n    color: \"#fff\",\n    border: \"none\"\n  },\n  resend: {\n    marginTop: \"10px\",\n    background: \"transparent\",\n    border: \"none\",\n    color: \"#007bff\",\n    cursor: \"pointer\"\n  }\n};\nexport default OtpVerify;\nvar _c;\n$RefreshReg$(_c, \"OtpVerify\");","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","useLocation","jsxDEV","_jsxDEV","OtpVerify","_s","_location$state","navigate","location","email","state","otp","setOtp","message","setMessage","seconds","setSeconds","loading","setLoading","timer","setInterval","s","clearInterval","handleVerify","e","preventDefault","res","post","data","setTimeout","err","_err$response","_err$response$data","response","handleResend","_err$response2","_err$response2$data","style","styles","container","children","card","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","maxLength","placeholder","required","input","button","Math","floor","type","onClick","disabled","resend","_c","height","display","justifyContent","alignItems","background","padding","width","textAlign","borderRadius","margin","color","border","marginTop","cursor","$RefreshReg$"],"sources":["D:/SaulDesign/frontend/src/otpverify.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\n\r\nfunction OtpVerify() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const email = location.state?.email;\r\n\r\n  const [otp, setOtp] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [seconds, setSeconds] = useState(300); // 5 minutes\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // countdown timer\r\n  useEffect(() => {\r\n    if (seconds === 0) return;\r\n    const timer = setInterval(() => {\r\n      setSeconds((s) => s - 1);\r\n    }, 1000);\r\n    return () => clearInterval(timer);\r\n  }, [seconds]);\r\n\r\n  const handleVerify = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await axios.post(\r\n        \"http://localhost:5000/api/auth/verify-otp\",\r\n        { email, otp }\r\n      );\r\n      setMessage(res.data.message);\r\n      setTimeout(() => navigate(\"/login\"), 1500);\r\n    } catch (err) {\r\n      setMessage(err.response?.data?.message || \"Verification failed\");\r\n    }\r\n  };\r\n\r\n  const handleResend = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await axios.post(\r\n        \"http://localhost:5000/api/auth/resend-otp\",\r\n        { email }\r\n      );\r\n      setMessage(res.data.message);\r\n      setSeconds(300); // reset timer\r\n    } catch (err) {\r\n      setMessage(err.response?.data?.message || \"Resend failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <form style={styles.card} onSubmit={handleVerify}>\r\n        <h2>Verify OTP</h2>\r\n        <p>{email}</p>\r\n\r\n        <input\r\n          value={otp}\r\n          onChange={(e) => setOtp(e.target.value)}\r\n          maxLength=\"6\"\r\n          placeholder=\"Enter OTP\"\r\n          required\r\n          style={styles.input}\r\n        />\r\n\r\n        <button style={styles.button}>Verify</button>\r\n\r\n        <p>Time left: {Math.floor(seconds / 60)}:{seconds % 60}</p>\r\n\r\n        {seconds === 0 && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleResend}\r\n            disabled={loading}\r\n            style={styles.resend}\r\n          >\r\n            Resend OTP\r\n          </button>\r\n        )}\r\n\r\n        {message && <p>{message}</p>}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  container: {\r\n    height: \"100vh\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    background: \"#f4f6f8\",\r\n  },\r\n  card: {\r\n    background: \"#fff\",\r\n    padding: \"30px\",\r\n    width: \"350px\",\r\n    textAlign: \"center\",\r\n    borderRadius: \"8px\",\r\n  },\r\n  input: {\r\n    width: \"100%\",\r\n    padding: \"10px\",\r\n    margin: \"15px 0\",\r\n  },\r\n  button: {\r\n    width: \"100%\",\r\n    padding: \"10px\",\r\n    background: \"#007bff\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n  },\r\n  resend: {\r\n    marginTop: \"10px\",\r\n    background: \"transparent\",\r\n    border: \"none\",\r\n    color: \"#007bff\",\r\n    cursor: \"pointer\",\r\n  },\r\n};\r\n\r\nexport default OtpVerify;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}