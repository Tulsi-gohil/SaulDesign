{"ast":null,"code":"import{useState,useEffect}from\"react\";import axios from\"axios\";import{useLocation,useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function OtpVerify(){var _location$state;const navigate=useNavigate();const location=useLocation();// Get email from signup page\nconst email=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.email;const[otp,setOtp]=useState(\"\");const[message,setMessage]=useState(\"\");const[loading,setLoading]=useState(false);// Redirect if email is not available\nuseEffect(()=>{if(!email){setMessage(\"No email found. Please signup first.\");setTimeout(()=>navigate(\"/Signup\"),2000);}},[email,navigate]);const handleSubmit=async e=>{e.preventDefault();// Prevent page refresh\nsetLoading(true);setMessage(\"\");try{const res=await axios.post(\"https://sauldesign.onrender.com/api/auth/verifyOtp\",{email,otp});setMessage(res.data.message||\"OTP Verified ✅\");// Redirect to login after success\nsetTimeout(()=>navigate(\"/login\"),1500);}catch(error){var _error$response,_error$response$data;setMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"Invalid OTP ❌\");}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container d-flex justify-content-center align-items-center min-vh-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4 shadow\",style:{maxWidth:\"400px\",width:\"100%\"},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-3\",children:\"Verify OTP\"}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info text-center\",children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Enter OTP\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"6-digit OTP\",value:otp,onChange:e=>setOtp(e.target.value),required:true,maxLength:6// Restrict input length\n})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-100\",disabled:loading||!otp||otp.length!==6// Disable if invalid\n,children:loading?\"Verifying...\":\"Verify OTP\"})]})]})});}export default OtpVerify;","map":{"version":3,"names":["useState","useEffect","axios","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","OtpVerify","_location$state","navigate","location","email","state","otp","setOtp","message","setMessage","loading","setLoading","setTimeout","handleSubmit","e","preventDefault","res","post","data","error","_error$response","_error$response$data","response","className","children","style","maxWidth","width","onSubmit","type","placeholder","value","onChange","target","required","maxLength","disabled","length"],"sources":["D:/SaulDesign/frontend/src/otpverify.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\n\r\nfunction OtpVerify() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  // Get email from signup page\r\n  const email = location.state?.email;\r\n\r\n  const [otp, setOtp] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Redirect if email is not available\r\n  useEffect(() => {\r\n    if (!email) {\r\n      setMessage(\"No email found. Please signup first.\");\r\n      setTimeout(() => navigate(\"/Signup\"), 2000);\r\n    }\r\n  }, [email, navigate]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault(); // Prevent page refresh\r\n    setLoading(true);\r\n    setMessage(\"\");\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        \"https://sauldesign.onrender.com/api/auth/verifyOtp\",\r\n        { email, otp }\r\n      );\r\n\r\n      setMessage(res.data.message || \"OTP Verified ✅\");\r\n\r\n      // Redirect to login after success\r\n      setTimeout(() => navigate(\"/login\"), 1500);\r\n    } catch (error) {\r\n      setMessage(error.response?.data?.message || \"Invalid OTP ❌\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container d-flex justify-content-center align-items-center min-vh-100\">\r\n      <div className=\"card p-4 shadow\" style={{ maxWidth: \"400px\", width: \"100%\" }}>\r\n        <h2 className=\"text-center mb-3\">Verify OTP</h2>\r\n\r\n        {message && (\r\n          <div className=\"alert alert-info text-center\">\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-3\">\r\n            <label className=\"form-label\">Enter OTP</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"6-digit OTP\"\r\n              value={otp}\r\n              onChange={(e) => setOtp(e.target.value)}\r\n              required\r\n              maxLength={6} // Restrict input length\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            className=\"btn btn-primary w-100\"\r\n            disabled={loading || !otp || otp.length !== 6} // Disable if invalid\r\n          >\r\n            {loading ? \"Verifying...\" : \"Verify OTP\"}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OtpVerify;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}